---
title: ODMS
language_tabs:
  - shell: Shell
  - http: HTTP
  - javascript: JavaScript
  - ruby: Ruby
  - python: Python
  - php: PHP
  - java: Java
  - go: Go
toc_footers: []
includes: []
search: true
code_clipboard: true
highlight_theme: darkula
headingLevel: 2
generator: "@tarslib/widdershins v4.0.30"

---

# ODMS

Base URLs:

# Authentication

# 用户接口

## POST 登录

POST /login

前端传入username和password两个参数进行登录
数据格式为x-www-form-urlcoded
登录成功后返回token

> Body 请求参数

```yaml
username: test
password: test

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|body|body|object| 否 |none|
|» username|body|string| 是 |用户名|
|» password|body|string| 是 |密码|

> 返回示例

```json
{
  "code": 200,
  "message": "success",
  "data": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbGFpbXMiOnsiaWQiOjEsInVzZXJuYW1lIjoiYWRtaW4ifSwiZXhwIjoxNzU2MDc5MDEzfQ.9J9mQgluIay4wtK60cDtdGKlZtEYmK_EJn_KlX2mtXU"
}
```

```json
{
  "code": 500,
  "message": "The username or password is incorrect",
  "data": null
}
```

```json
{
  "code": 500,
  "message": "The user does not exist",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

*返回响应*

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|none|
|» message|string|true|none|消息|none|
|» data|string¦null|true|none|返回数据|none|

## POST 注册

POST /admin

在已登录为管理员后可以添加新的管理账户

> Body 请求参数

```yaml
username: test1
password: test
name: tt
email: t@t.com
department: test

```

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authorization|header|string| 是 |token|
|body|body|object| 否 |none|
|» username|body|string| 是 |用户名|
|» password|body|string| 是 |密码|
|» name|body|string| 是 |真实姓名|
|» email|body|string| 是 |电子邮件|
|» department|body|string| 是 |部门|

> 返回示例

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

```json
{
  "code": 500,
  "message": "The username already exists",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|null|true|none|返回数据|null|

## GET 查看个人信息

GET /admin

通过解析Headers中token获取个人信息

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|Authorization|header|string| 是 |认证信息(token)|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "username": "admin",
    "name": "vvv",
    "email": "123@456.com",
    "department": "test",
    "createdAt": "2025-08-24T17:21:08",
    "updatedAt": "2025-08-24T17:24:35"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object|true|none|返回数据|个人信息数据|
|»» id|integer|true|none||none|
|»» username|string|true|none||none|
|»» name|string|true|none||none|
|»» email|string|true|none||none|
|»» department|string|true|none||none|
|»» createdAt|string|true|none||none|
|»» updatedAt|string|true|none||none|

## PUT 更新个人信息

PUT /admin

通过传入的username（此项不可更改）以及其他信息更新当前账户
未修改的信息要以原本的值传入
返回更新后的个人信息

### 请求参数

|名称|位置|类型|必选|说明|
|---|---|---|---|---|
|username|query|string| 是 |用户名（不可更改）|
|name|query|string| 是 |真实姓名|
|email|query|string| 是 |电子邮件|
|department|query|string| 是 |部门|
|Authorization|header|string| 否 |认证信息(token)|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 2,
    "username": "test1",
    "name": "tt",
    "email": "t@tt.com",
    "department": "test",
    "createdAt": "2025-08-24T19:49:30",
    "updatedAt": "2025-08-24T20:01:18.602768"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object¦null|true|none|返回数据|更新后的个人信息|

## PATCH 修改密码

PATCH /admin

传入原密码、新密码、确认新密码来修改密码
传入格式为json

> Body 请求参数

```json
{
  "old_pwd": "test",
  "new_pwd": "test1",
  "re_pwd": "test1"
}
```

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|Authorization|header|string| 是 ||none|
|body|body|object| 否 ||none|
|» old_pwd|body|string| 是 | 原密码|none|
|» new_pwd|body|string| 是 | 新密码|none|
|» re_pwd|body|string| 是 | 重复密码|none|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object|true|none|返回数据|null|

## POST 退出登录

POST /logout

退出登录并使当前token失效

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|Authorization|header|string| 是 ||认证信息(token)|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|string|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|string¦null|true|none|返回数据|null|

# 文章接口

## GET 获取文章详情

GET /document/1

通过url中的文章id在新页面显示文章的详细内容

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "title": "测试文章标题",
    "type": "测试",
    "content": "测试文章...",
    "excerpt": "测试",
    "department": "test",
    "updatedAt": "2025-08-25T13:51:42"
  }
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object¦null|true|none|返回数据|文章详细数据|
|»» id|integer|true|none||none|
|»» title|string|true|none||none|
|»» type|string|true|none||none|
|»» content|string|true|none||none|
|»» excerpt|string|true|none||none|

## POST 添加文章

POST /admin/adddoc

登录为管理员后可以添加文章
文章传入格式为json

> Body 请求参数

```json
"{\r\n    \"title\": \"测试文章标题2\",\r\n    \"type\": \"测试\",\r\n    \"content\": \"测试文章...\",\r\n    \"excerpt\": \"测试摘要\"\r\n    \"department\": \"test\"\r\n}"
```

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|Authorization|header|string| 是 ||认证信息(token)|
|body|body|object| 否 ||none|
|» title|body|string| 是 | 文章标题|none|
|» type|body|string| 是 | 文章类型|none|
|» content|body|string| 是 | 正文|none|
|» excerpt|body|string| 是 | 摘要|none|
|» department|body|string| 是 | 发文部门|none|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object¦null|true|none|返回数据|null|

## GET 搜索

GET /document

通过传入的type和关键词进行搜索
返回文章的基本信息（id、title、type）

> Body 请求参数

```yaml
type: 测试
department: test
keyword: 测
startDate: ""
endDate: ""

```

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|body|body|object| 否 ||none|
|» type|body|string| 否 ||文章类型|
|» department|body|string| 否 ||发文部门|
|» keyword|body|string| 否 ||关键词|
|» startDate|body|string| 否 ||筛选开始时间|
|» endDate|body|string| 否 ||筛选结束时间|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": [
    {
      "id": 1,
      "title": "测试文章标题",
      "type": "测试",
      "department": "test",
      "updatedAt": "2025-08-25T13:51:42"
    }
  ]
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object¦null|true|none|返回数据|包含文章的基本信息|

## PUT 修改文章

PUT /admin/doc

通过传入的文章id（此项不可更改）以及其他信息更新当前文章
未修改的信息要以原本的值传入
返回修改后的文章

> Body 请求参数

```yaml
id: 2
title: test
content: 测试文章...
excerpt: 摘要
type: test
department: test

```

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|Authorization|header|string| 是 ||认证信息(token)|
|body|body|object| 否 ||none|
|» id|body|integer| 是 ||文章id|
|» title|body|string| 是 ||文章标题|
|» content|body|string| 是 ||正文|
|» excerpt|body|string| 是 ||摘要|
|» type|body|string| 是 ||文章类型|
|» department|body|string| 否 ||发文部门|

> 返回示例

> 200 Response

```json
"{\r\n    \"code\": 200,\r\n    \"message\": \"success\",\r\n    \"data\": {\r\n        \"id\": 2,\r\n        \"title\": \"test\",\r\n        \"type\": \"测试\",\r\n        \"content\": \"测试文章...\",\r\n        \"excerpt\": \"摘要\"\r\n        \"department\": \"test\"\r\n    }\r\n}"
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|object|true|none|返回数据|修改后的文章详情|
|»» id|integer|true|none||none|
|»» title|string|true|none||none|
|»» type|string|true|none||none|
|»» content|string|true|none||none|
|»» excerpt|string|true|none||none|

## DELETE 删除文章

DELETE /admin/doc

通过传入的id删除对应文章

> Body 请求参数

```yaml
id: 2

```

### 请求参数

|名称|位置|类型|必选|中文名|说明|
|---|---|---|---|---|---|
|Authorization|header|string| 是 ||认证信息(token)|
|body|body|object| 否 ||none|
|» id|body|integer| 是 ||文章ID|

> 返回示例

> 200 Response

```json
{
  "code": 200,
  "message": "success",
  "data": null
}
```

### 返回结果

|状态码|状态码含义|说明|数据模型|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|none|Inline|

### 返回数据结构

状态码 **200**

|名称|类型|必选|约束|中文名|说明|
|---|---|---|---|---|---|
|» code|integer|true|none|状态码|200-成功/500-失败|
|» message|string|true|none|响应信息|"success"/"error"|
|» data|null|true|none|返回数据|null|
